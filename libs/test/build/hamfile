
project "boost/test"
   : requirements =
         <version>1.58.0+1
        @<include>../include
# if uncommented will work wrong because of undefined order of evaluation 
# for conditional features
#        @<link>shared:<define>BOOST_TEST_DYN_LINK=1
        @<define>BOOST_TEST_NO_LIB
        (<toolset>msvc -> <asynch-exceptions>on)
   ;
    
local
alias base_sources
   :
  ../src/compiler_log_formatter.cpp
  ../src/debug.cpp
  ../src/exception_safety.cpp
  ../src/execution_monitor.cpp
  ../src/framework.cpp
  ../src/interaction_based.cpp
  ../src/logged_expectations.cpp
  ../src/plain_report_formatter.cpp
  ../src/progress_monitor.cpp
  ../src/results_collector.cpp
  ../src/results_reporter.cpp
  ../src/test_tools.cpp
  ../src/unit_test_log.cpp
  ../src/unit_test_main.cpp
  ../src/unit_test_monitor.cpp
  ../src/unit_test_parameters.cpp
  ../src/unit_test_suite.cpp
  ../src/xml_log_formatter.cpp
  ../src/xml_report_formatter.cpp
   ;

local
alias dependencies 
   :
     @/boost/bind/<version>1.58.0+1
     @/boost/config/<version>1.58.0+1
     @/boost/core/<version>1.58.0+1
     @/boost/detail/<version>1.58.0+1
     @/boost/exception/<version>1.58.0+1
     @/boost/io/<version>1.58.0+1
     @/boost/iterator/<version>1.58.0+1
     @/boost/lexical_cast/<version>1.58.0+1
     @/boost/mpl/<version>1.58.0+1
     @/boost/numeric/conversion/<version>1.58.0+1
     @/boost/optional/<version>1.58.0+1
     @/boost/preprocessor/<version>1.58.0+1
     @/boost/smart_ptr/<version>1.58.0+1
     @/boost/static_assert/<version>1.58.0+1
     @/boost/timer/<version>1.58.0+1
     @/boost/type_traits/<version>1.58.0+1
     @/boost/utility/<version>1.58.0+1
   ;

explicit
lib utf
   :
     base_sources
     dependencies
   :
    <link>static
   ;

explicit
header-lib boost.test.minimal 
   :
    /boost/smart_ptr/<version>1.58.0+1 
   ;

explicit
lib boost.test.execution_monitor 
   :
    base_sources
    ../src/test_main.cpp
    dependencies
   :
    <link>static
   ;
